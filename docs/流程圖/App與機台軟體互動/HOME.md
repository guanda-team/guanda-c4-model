# App與機台軟體互動

- Lv1
  - 橫移料架
  - 輸送料架
  - 送料手臂
- Lv2
  - 手機 App
  - 機台軟體
- Lv3
  - 打點 (不列入最終進度，即可做可不做)
  - 鑽孔 (需做完)

## 🔥 設定機台軟體操作加工

```mermaid
sequenceDiagram
  機台軟體 ->> App伺服器: 設定機台軟體操作加工
  App伺服器 ->> App: 發送通知告知App已切換至機台軟體操作
  App伺服器 ->> App: 與App斷線
  App伺服器 ->> App伺服器: 強制清除目前使用者
```

## 🔥 設定機台軟體操作時，App 斷線前嘗試操作

```mermaid
sequenceDiagram
  機台軟體 ->> App伺服器: 設定機台軟體操作加工
  App ->> App伺服器: 發送送料請求
  App伺服器 ->> App: 拒絕請求
```

## 🔥 設定機台軟體操作時，機台軟體發送送料請求

```mermaid
sequenceDiagram
  機台軟體 ->> App伺服器: 設定機台軟體操作加工
  App伺服器 ->> 自動控制: 設定機台軟體操作加工
  自動控制 ->> 自動控制: 等待人工操作，並等待加工完成
  自動控制 ->> App伺服器: 發送加工完成訊息
  App伺服器 ->> 機台軟體: 將加工訊息寫入列表
  機台軟體 ->> 機台軟體: 將列表同步至專案
```

## 🔥 設定 App 操作時，App 發送送料請求

```mermaid
sequenceDiagram
  App ->> App伺服器: 發送送料請求
  App伺服器 ->> 自動控制: 發送送料請求
  自動控制 ->> 自動控制: 等待加工完成
  自動控制 ->> App伺服器: 發送加工完成訊息
  App伺服器 ->> 機台軟體: 將加工訊息寫入列表
  機台軟體 ->> 機台軟體: 將列表同步至專案
```

如何知道機台已操作完成？
